{"ast":null,"code":"import _regeneratorRuntime from\"/Users/quanhuynh/workspace/myProject/VTT/test_code/python_src/npm_web/shoe-medipine/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/quanhuynh/workspace/myProject/VTT/test_code/python_src/npm_web/shoe-medipine/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _createForOfIteratorHelper from\"/Users/quanhuynh/workspace/myProject/VTT/test_code/python_src/npm_web/shoe-medipine/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import React from'react';import'./App.css';import'./styles.css';import{BOX_CONNECTIONS,Objectron}from'@mediapipe/objectron';import{Camera}from'@mediapipe/camera_utils';import DeviceDetector from\"device-detector-js\";// import { drawingUtils} from '@mediapipe/drawing_utils'\nimport{drawConnectors,drawLandmarks}from'@mediapipe/drawing_utils';// import {FpsView} from \"react-fps\";\n// Usage: testSupport({client?: string, os?: string}[])\n// Client and os are regular expressions.\n// See: https://cdn.jsdelivr.net/npm/device-detector-js@2.2.10/README.md for\n// legal values for client and os\nimport{jsx as _jsx}from\"react/jsx-runtime\";testSupport([{client:'Chrome'}]);// navigator.getWebcam = (navigator.getUserMedia || navigator.webKitGetUserMedia || navigator.moxGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia);\nfunction testSupport(supportedDevices){var deviceDetector=new DeviceDetector();var detectedDevice=deviceDetector.parse(navigator.userAgent);var isSupported=false;var _iterator=_createForOfIteratorHelper(supportedDevices),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var device=_step.value;if(device.client!==undefined){var re=new RegExp(\"^\".concat(device.client,\"$\"));if(!re.test(detectedDevice.client.name)){continue;}}if(device.os!==undefined){var _re=new RegExp(\"^\".concat(device.os,\"$\"));if(!_re.test(detectedDevice.os.name)){continue;}}isSupported=true;break;}}catch(err){_iterator.e(err);}finally{_iterator.f();}if(!isSupported){console.log(\"Bypass device not support\");// alert(`This demo, running on ${detectedDevice.client.name}/${detectedDevice.os.name}, ` +\n//       `is not well supported at this time, continue at your own risk.`);\n}}// const fpsControl = new controls.FPS();\nvar controls=window;var drawingUtils=window;var mpObjectron=window;var videoElement=document.getElementsByClassName('input_video')[0];var canvasElement=document.getElementsByClassName('output_canvas')[0];var controlsElement=document.getElementsByClassName('control-panel')[0];var canvasCtx=canvasElement.getContext('2d');videoElement.setAttribute('autoplay','');videoElement.setAttribute('muted','');videoElement.setAttribute('playsinline','');function App(){// const videoElement =\n//   document.getElementsByClassName('input_video')[0] as HTMLVideoElement;\n// const canvasElement =\n//   document.getElementsByClassName('output_canvas')[0] as HTMLCanvasElement;\n// const controlsElement =\n//   document.getElementsByClassName('control-panel')[0] as HTMLDivElement;\n// const canvasCtx = canvasElement.getContext('2d')!;\n// Fix for iOS Safari from https://leemartin.dev/hello-webrtc-on-safari-11-e8bcb5335295\nvar objectron=new Objectron({locateFile:function locateFile(file){console.log(\"!!!!!!\",file);return\"./assets/objectron/\".concat(file);// return `https://cdn.jsdelivr.net/npm/@mediapipe/objectron/${file}`;\n}});objectron.setOptions({modelName:'Shoe',maxNumObjects:3,minDetectionConfidence:0.5,minTrackingConfidence:0.99});function onResults(results){// console.log(\"run result\", results);\ncanvasCtx.save();canvasCtx.drawImage(results.image,0,0,canvasElement.width,canvasElement.height);if(!!results.objectDetections){var _iterator2=_createForOfIteratorHelper(results.objectDetections),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var detectedObject=_step2.value;console.log(detectedObject.keypoints);// Reformat keypoint information as landmarks, for easy drawing.\nvar landmarks=detectedObject.keypoints.map(function(x){return x.point2d;});// // Draw bounding box.\ndrawConnectors(canvasCtx,landmarks,BOX_CONNECTIONS,{color:'#FF0000'});drawLandmarks(canvasCtx,[landmarks[0]],{color:'#FFFFFF'});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}canvasCtx.restore();}objectron.onResults(onResults);var camera=new Camera(videoElement,{onFrame:function(){var _onFrame=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return objectron.send({image:videoElement});case 2:case\"end\":return _context.stop();}},_callee);}));function onFrame(){return _onFrame.apply(this,arguments);}return onFrame;}(),width:1280,height:720});camera.start();// ###############################################################\n// ###############################################################\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"App\"});}export default App;","map":{"version":3,"names":["React","BOX_CONNECTIONS","Objectron","Camera","DeviceDetector","drawConnectors","drawLandmarks","jsx","_jsx","testSupport","client","supportedDevices","deviceDetector","detectedDevice","parse","navigator","userAgent","isSupported","_iterator","_createForOfIteratorHelper","_step","s","n","done","device","value","undefined","re","RegExp","concat","test","name","os","err","e","f","console","log","controls","window","drawingUtils","mpObjectron","videoElement","document","getElementsByClassName","canvasElement","controlsElement","canvasCtx","getContext","setAttribute","App","objectron","locateFile","file","setOptions","modelName","maxNumObjects","minDetectionConfidence","minTrackingConfidence","onResults","results","save","drawImage","image","width","height","objectDetections","_iterator2","_step2","detectedObject","keypoints","landmarks","map","x","point2d","color","restore","camera","onFrame","_onFrame","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","send","stop","apply","arguments","start","className"],"sources":["/Users/quanhuynh/workspace/myProject/VTT/test_code/python_src/npm_web/shoe-medipine/src/App.tsx"],"sourcesContent":["import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport './styles.css';\nimport {BOX_CONNECTIONS,  Objectron, ObjectronConfig , ResultsListener, ObjectronInterface, Results, Point2D, LandmarkConnectionArray} from '@mediapipe/objectron';\nimport { Camera } from '@mediapipe/camera_utils';\nimport DeviceDetector from \"device-detector-js\";\n// import { drawingUtils} from '@mediapipe/drawing_utils'\nimport {drawConnectors, drawLandmarks } from '@mediapipe/drawing_utils';\n\n// import {FpsView} from \"react-fps\";\n// Usage: testSupport({client?: string, os?: string}[])\n// Client and os are regular expressions.\n// See: https://cdn.jsdelivr.net/npm/device-detector-js@2.2.10/README.md for\n// legal values for client and os\ntestSupport([\n  {client: 'Chrome'},\n]);\n// navigator.getWebcam = (navigator.getUserMedia || navigator.webKitGetUserMedia || navigator.moxGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia);\nfunction testSupport(supportedDevices:{client?: string; os?: string;}[]) {\n  const deviceDetector = new DeviceDetector();\n  const detectedDevice = deviceDetector.parse(navigator.userAgent);\n  \n  let isSupported = false;\n  for (const device of supportedDevices) {\n    if (device.client !== undefined) {\n      const re = new RegExp(`^${device.client}$`);\n      if (!re.test(detectedDevice.client.name)) {\n        continue;\n      }\n    }\n    if (device.os !== undefined) {\n      const re = new RegExp(`^${device.os}$`);\n      if (!re.test(detectedDevice.os.name)) {\n        continue;\n      }\n    }\n    isSupported = true;\n    break;\n  }\n  if (!isSupported) {\n    console.log(\"Bypass device not support\");\n    // alert(`This demo, running on ${detectedDevice.client.name}/${detectedDevice.os.name}, ` +\n    //       `is not well supported at this time, continue at your own risk.`);\n  }\n}\n\n\n// const fpsControl = new controls.FPS();\n\nconst controls = window;\nconst drawingUtils = window;\nconst mpObjectron = window;\n\nconst videoElement =\n  document.getElementsByClassName('input_video')[0] as HTMLVideoElement;\nconst canvasElement =\n  document.getElementsByClassName('output_canvas')[0] as HTMLCanvasElement;\nconst controlsElement =\n  document.getElementsByClassName('control-panel')[0] as HTMLDivElement;\nconst canvasCtx = canvasElement.getContext('2d')!;\n\nvideoElement.setAttribute('autoplay', '');\nvideoElement.setAttribute('muted', '');\nvideoElement.setAttribute('playsinline', '')\n\n\nfunction App() {\n  \n  // const videoElement =\n  //   document.getElementsByClassName('input_video')[0] as HTMLVideoElement;\n  // const canvasElement =\n  //   document.getElementsByClassName('output_canvas')[0] as HTMLCanvasElement;\n  // const controlsElement =\n  //   document.getElementsByClassName('control-panel')[0] as HTMLDivElement;\n  // const canvasCtx = canvasElement.getContext('2d')!;\n\n \n  // Fix for iOS Safari from https://leemartin.dev/hello-webrtc-on-safari-11-e8bcb5335295\n\n\n    const objectron = new Objectron({locateFile: (file) => {\n      console.log(\"!!!!!!\", file);\n      return `./assets/objectron/${file}`;\n      // return `https://cdn.jsdelivr.net/npm/@mediapipe/objectron/${file}`;\n    }});\n\n    objectron.setOptions({\n      modelName: 'Shoe',\n      maxNumObjects: 3,\n      minDetectionConfidence: 0.5,\n      minTrackingConfidence: 0.99,\n    });\n\n    function onResults(results: Results) {\n      // console.log(\"run result\", results);\n      canvasCtx.save();\n      canvasCtx.drawImage(\n          results.image, 0, 0, canvasElement.width, canvasElement.height);\n      if (!!results.objectDetections) {\n        for (const detectedObject of results.objectDetections) {\n          console.log(detectedObject.keypoints);\n          // Reformat keypoint information as landmarks, for easy drawing.\n          const landmarks: Point2D[] = detectedObject.keypoints.map(x => x.point2d);\n          // // Draw bounding box.\n          drawConnectors(canvasCtx, landmarks, BOX_CONNECTIONS, {color: '#FF0000'});\n\n          drawLandmarks(canvasCtx, [landmarks[0]], {color: '#FFFFFF'});\n        }\n      }\n      canvasCtx.restore();\n    }\n\n    objectron.onResults(onResults);\n\n    const camera = new Camera(videoElement, {\n      onFrame: async () => {\n        \n        await objectron.send({image: videoElement});\n      },\n      width: 1280,\n      height: 720\n    });\n    camera.start();\n// ###############################################################\n\n\n    \n\n\n// ###############################################################\n  return (\n    \n    <div className=\"App\">\n      {/* <FpsView/> */}\n      {/* <div className=\"container\">\n        <video className=\"input_video\"></video>\n        <canvas className=\"output_canvas\" width=\"1280px\" height=\"720px\"></canvas>\n      </div> */}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}