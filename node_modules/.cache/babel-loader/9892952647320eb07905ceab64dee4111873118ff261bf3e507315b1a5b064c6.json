{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/quanhuynh/workspace/myProject/VTT/test_code/python_src/npm_web/shoe-medipine/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\nvar _createForOfIteratorHelper = require(\"/Users/quanhuynh/workspace/myProject/VTT/test_code/python_src/npm_web/shoe-medipine/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\nvar _createClass = require(\"/Users/quanhuynh/workspace/myProject/VTT/test_code/python_src/npm_web/shoe-medipine/node_modules/@babel/runtime/helpers/createClass.js\").default;\nvar _classCallCheck = require(\"/Users/quanhuynh/workspace/myProject/VTT/test_code/python_src/npm_web/shoe-medipine/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar version_1 = require(\"../../utils/version\");\nvar variable_replacement_1 = require(\"../../utils/variable-replacement\");\nvar user_agent_1 = require(\"../../utils/user-agent\");\nvar browsers_json_1 = __importDefault(require(\"../../fixtures/regexes/client/browsers.json\"));\nvar browser_engine_json_1 = __importDefault(require(\"../../fixtures/regexes/client/browser_engine.json\"));\nvar available_browsers_json_1 = __importDefault(require(\"./fixtures/available-browsers.json\"));\nvar mobile_only_browsers_json_1 = __importDefault(require(\"./fixtures/mobile-only-browsers.json\"));\nvar BrowserParser = /*#__PURE__*/_createClass(function BrowserParser(options) {\n  var _this = this;\n  _classCallCheck(this, BrowserParser);\n  this.options = {\n    versionTruncation: 1\n  };\n  this.parse = function (userAgent) {\n    var result = {\n      type: \"\",\n      name: \"\",\n      version: \"\",\n      engine: \"\",\n      engineVersion: \"\"\n    };\n    var _iterator = _createForOfIteratorHelper(browsers_json_1.default),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var browser = _step.value;\n        var _match = user_agent_1.userAgentParser(browser.regex, userAgent);\n        if (!_match) continue;\n        var vrpVersion = variable_replacement_1.variableReplacement(browser.version, _match);\n        var version = version_1.formatVersion(vrpVersion, _this.options.versionTruncation);\n        var shortVersion = version && parseFloat(version_1.formatVersion(vrpVersion, 1)) || \"\";\n        if (browser.engine) {\n          result.engine = browser.engine.default;\n          if (browser.engine && browser.engine.versions && shortVersion) {\n            var sortedEngineVersions = Object.entries(browser.engine.versions).sort(function (a, b) {\n              return parseFloat(a[0]) > parseFloat(b[0]) ? 1 : -1;\n            });\n            var _iterator3 = _createForOfIteratorHelper(sortedEngineVersions),\n              _step3;\n            try {\n              for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                var _step3$value = _slicedToArray(_step3.value, 2),\n                  versionThreshold = _step3$value[0],\n                  engineByVersion = _step3$value[1];\n                if (parseFloat(versionThreshold) <= shortVersion) {\n                  result.engine = engineByVersion || \"\";\n                }\n              }\n            } catch (err) {\n              _iterator3.e(err);\n            } finally {\n              _iterator3.f();\n            }\n          }\n        }\n        result.type = \"browser\";\n        result.name = variable_replacement_1.variableReplacement(browser.name, _match);\n        result.version = version;\n        break;\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    if (!result.engine) {\n      var _iterator2 = _createForOfIteratorHelper(browser_engine_json_1.default),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var browserEngine = _step2.value;\n          var match = null;\n          try {\n            match = RegExp(browserEngine.regex, \"i\").exec(userAgent);\n          } catch (_a) {\n            // TODO: find out why it fails in some browsers\n          }\n          if (!match) continue;\n          result.engine = browserEngine.name;\n          break;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n    result.engineVersion = version_1.formatVersion(version_1.parseBrowserEngineVersion(userAgent, result.engine), _this.options.versionTruncation);\n    return result;\n  };\n  this.options = Object.assign(Object.assign({}, this.options), options);\n});\nexports.default = BrowserParser;\nBrowserParser.getBrowserShortName = function (browserName) {\n  for (var _i = 0, _Object$entries = Object.entries(available_browsers_json_1.default); _i < _Object$entries.length; _i++) {\n    var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n      shortName = _Object$entries$_i[0],\n      name = _Object$entries$_i[1];\n    if (name === browserName) {\n      return shortName;\n    }\n  }\n  return \"\";\n};\nBrowserParser.isMobileOnlyBrowser = function (browserName) {\n  return mobile_only_browsers_json_1.default.includes(BrowserParser.getBrowserShortName(browserName));\n};","map":{"version":3,"names":["_slicedToArray","require","default","_createForOfIteratorHelper","_createClass","_classCallCheck","__importDefault","mod","__esModule","Object","defineProperty","exports","value","version_1","variable_replacement_1","user_agent_1","browsers_json_1","browser_engine_json_1","available_browsers_json_1","mobile_only_browsers_json_1","BrowserParser","options","_this","versionTruncation","parse","userAgent","result","type","name","version","engine","engineVersion","_iterator","_step","s","n","done","browser","match","userAgentParser","regex","vrpVersion","variableReplacement","formatVersion","shortVersion","parseFloat","versions","sortedEngineVersions","entries","sort","a","b","_iterator3","_step3","_step3$value","versionThreshold","engineByVersion","err","e","f","_iterator2","_step2","browserEngine","RegExp","exec","_a","parseBrowserEngineVersion","assign","getBrowserShortName","browserName","_i","_Object$entries","length","_Object$entries$_i","shortName","isMobileOnlyBrowser","includes"],"sources":["/Users/quanhuynh/workspace/myProject/VTT/test_code/python_src/npm_web/shoe-medipine/node_modules/device-detector-js/dist/parsers/client/browser.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst version_1 = require(\"../../utils/version\");\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nconst browsers_json_1 = __importDefault(require(\"../../fixtures/regexes/client/browsers.json\"));\nconst browser_engine_json_1 = __importDefault(require(\"../../fixtures/regexes/client/browser_engine.json\"));\nconst available_browsers_json_1 = __importDefault(require(\"./fixtures/available-browsers.json\"));\nconst mobile_only_browsers_json_1 = __importDefault(require(\"./fixtures/mobile-only-browsers.json\"));\nclass BrowserParser {\n    constructor(options) {\n        this.options = {\n            versionTruncation: 1\n        };\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                name: \"\",\n                version: \"\",\n                engine: \"\",\n                engineVersion: \"\"\n            };\n            for (const browser of browsers_json_1.default) {\n                const match = user_agent_1.userAgentParser(browser.regex, userAgent);\n                if (!match)\n                    continue;\n                const vrpVersion = variable_replacement_1.variableReplacement(browser.version, match);\n                const version = version_1.formatVersion(vrpVersion, this.options.versionTruncation);\n                const shortVersion = version && parseFloat(version_1.formatVersion(vrpVersion, 1)) || \"\";\n                if (browser.engine) {\n                    result.engine = browser.engine.default;\n                    if (browser.engine && browser.engine.versions && shortVersion) {\n                        const sortedEngineVersions = Object.entries(browser.engine.versions).sort((a, b) => {\n                            return parseFloat(a[0]) > parseFloat(b[0]) ? 1 : -1;\n                        });\n                        for (const [versionThreshold, engineByVersion] of sortedEngineVersions) {\n                            if (parseFloat(versionThreshold) <= shortVersion) {\n                                result.engine = engineByVersion || \"\";\n                            }\n                        }\n                    }\n                }\n                result.type = \"browser\";\n                result.name = variable_replacement_1.variableReplacement(browser.name, match);\n                result.version = version;\n                break;\n            }\n            if (!result.engine) {\n                for (const browserEngine of browser_engine_json_1.default) {\n                    let match = null;\n                    try {\n                        match = RegExp(browserEngine.regex, \"i\").exec(userAgent);\n                    }\n                    catch (_a) {\n                        // TODO: find out why it fails in some browsers\n                    }\n                    if (!match)\n                        continue;\n                    result.engine = browserEngine.name;\n                    break;\n                }\n            }\n            result.engineVersion = version_1.formatVersion(version_1.parseBrowserEngineVersion(userAgent, result.engine), this.options.versionTruncation);\n            return result;\n        };\n        this.options = Object.assign(Object.assign({}, this.options), options);\n    }\n}\nexports.default = BrowserParser;\nBrowserParser.getBrowserShortName = (browserName) => {\n    for (const [shortName, name] of Object.entries(available_browsers_json_1.default)) {\n        if (name === browserName) {\n            return shortName;\n        }\n    }\n    return \"\";\n};\nBrowserParser.isMobileOnlyBrowser = (browserName) => {\n    return mobile_only_browsers_json_1.default.includes(BrowserParser.getBrowserShortName(browserName));\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}